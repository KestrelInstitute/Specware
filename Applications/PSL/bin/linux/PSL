#!/bin/sh

xemacs=`which xemacs`
act='launch Specware'

PATH=/bin:/usr/bin:/etc:/sbin:/usr/sbin

# Test whether SPECWARE4 has been set

if [ -z "$SPECWARE4" ]; then
    echo "Failed to $act, SPECWARE4 environment variable not set" 2>&1
    exit 1
fi

# Test whether SPECWARE4 is a directory

if [ ! -d "$SPECWARE4" ]; then
   echo "Failed to $act, $SPECWARE4 is not a directory" 2>&1
   exit 1
fi

# Ensure SPECWARE4 is set to full pathname:

case "$SPECWARE" in
    /*) : ok;;
    *)  SPECWARE="`pwd`/$SPECWARE";;
esac

echo "\$SPECWARE4=$SPECWARE4"

# Test whether SPECWARE4 has been set

if [ -z "$SPECWARE4" ]; then
    echo "Failed to $act, SPECWARE4 environment variable not set" 2>&1
    exit 1
fi

# Test whether SPECWARE4 is a directory

if [ ! -d "$SPECWARE4" ]; then
   echo "Failed to $act, $SPECWARE4 is not a directory" 2>&1
   exit 1
fi

# Ensure SPECWARE4 is set to full pathname:

case "$SPECWARE" in
    /*) : ok;;
    *)  SPECWARE="`pwd`/$SPECWARE";;
esac

if [ ! -d "$SPECWARE4"/Applications/PSL ]; then
   echo "Failed to $act: could not find directory
   $SPECWARE4/Applications/PSL" 2>&1
   exit 1
fi

SPECWARE_BIN="$SPECWARE4"/Applications/PSL/bin/linux

# Try to find lisp executable:

export BIN_DIR=$SPECWARE_BIN
. $SPECWARE4/Scripts/unix/Verify_ACL

LISP_EXECUTABLE="$LISP"
LISP_HEAP_IMAGE="$SPECWARE_BIN"/PSL.dxl
LISP_DIRECTORY="$SPECWARE4"/
export LISP_EXECUTABLE
export LISP_HEAP_IMAGE
export LISP_DIRECTORY


$xemacs -no-init-file \
	-l "$SPECWARE4"/Library/IO/Emacs/load-ilisp \
	-geometry 180x70+180+2 \
	-eval "(run-specware4)" &
#       -name "Specware" \
#       -title "Specware" \
#       -geometry =150x60+20+20 \
