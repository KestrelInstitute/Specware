#
# common make rules for generated C files from Specware
#

# uncomment following to disable garbage collector
# USEGC = no 

CC = gcc
LD = gcc

# the directory for the Boehm garbage collector:

ifeq "$(USEGC)" "no"
  SWGC = -USWGC
  GCLIB =
  GCINCLUDE =
else
  GCDIR = $(SPECWARE4)/Library/Clib/gc-7.2alpha2
  SWGC = -DSWGC
  GCLIB = $(GCDIR)/gc.a
  GCINCLUDE = -I$(GCDIR)/include
endif

LDLIBS := $(LDLIBS) $(GCLIB)
CPPFLAGS :=  -w $(SWGC) $(CPPFLAGS) -I$(SPECWARE4)/Library/Clib $(GCINCLUDE)

dummyall:
	@echo "   *** Please specify your target on"
	@echo "   *** the command line or place it in"
	@echo "   *** front of the \"#include\" statement"
	@echo "   *** in the Makefile."


$(GCLIB):
	cd $(GCDIR) ; $(MAKE)
