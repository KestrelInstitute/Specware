#!/bin/sh
PATH=/bin:/usr/bin:/usr/local/bin
self=`basename $0`

case $# in
     1) : ok;;
     *) for F
        do "$0" "$F"
	done
	exit 0;;
esac

F="$1"

if [ ! -r "$F" ]
then exec echo "$self: cannot open $F" 2>&1
fi

if [ ! -w "$F" ]
then exec echo "$self: cannot write to $F" 2>&1
fi

echo extra nav-linking "$F"

B=`basename $F`

ed - "$F" <<!r0tAn1mReT
g|^>Home</A$|-t$
g|^HREF=|-s|^|:)|
g|^></HTML|+s|^|(:|
g|^(::)|+s|^|;)|
g|^(:|s|||
g|^:)|s|||
g|^ALIGN="center"|+++s|\(^>[A-Z].*\. [A-Z].*\)</TD|:)\1</A></TD|
g|^ALIGN="center"|+++s|^>Specware|(:&|
g|^(:|---s|^|:)|
g|^;)|.m?^:)?
g|^;)|s||><A |
g|^(:|+s|<|</A>&|
g|^[:;])|s|||
g|^(:|s|||
g|^>Up</A$|-t$
g|^HREF=|-s|^|:)|
g|^></HTML|+s|^|(:|
g|^(::)|+s|^|;)|
g|^(:|s|||
g|^:)|s|||
g|^ALIGN="center"|++s|\(^>[A-Z].*\. [A-Z].*\)</TD|:)\1</A></TD|
g|^;)|.m?^:)?
g|^;)|.m--
g|^;)|s||><A |
g|^:)|s|||
w
q
!r0tAn1mReT
